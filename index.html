<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monish V | 3D Developer Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Libraries -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/"
        }
    }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
    <!-- Updated Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!--
    ================================================================
    GLSL SHADER DEFINITIONS
    ================================================================
    -->

    <!-- Noise Function (used by multiple shaders) -->
    <script type="text/plain" id="glsl-noise">
        /*
         * Classic Perlin noise 3D (GLSL)
         * Author: Stefan Gustavson
         * Optimised Ashima Arts noise code.
         */
        
            vec3 mod289(vec3 x) {
                return x - floor(x * (1.0 / 289.0)) * 289.0;
            }

            vec4 mod289(vec4 x) {
                return x - floor(x * (1.0 / 289.0)) * 289.0;
            }

            vec4 permute(vec4 x) {
                return mod289(((x*34.0)+1.0)*x);
            }

            vec4 taylorInvSqrt(vec4 r) {
                return 1.79284291400159 - 0.85373472095314 * r;
            }

            float snoise(vec3 v) {
                const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
                const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

                // First corner
                vec3 i  = floor(v + dot(v, C.yyy) );
                vec3 x0 =   v - i + dot(i, C.xxx) ;

                // Other corners
                vec3 g = step(x0.yzx, x0.xyz);
                vec3 l = 1.0 - g;
                vec3 i1 = min( g.xyz, l.zxy );
                vec3 i2 = max( g.xyz, l.zxy );

                vec3 x1 = x0 - i1 + C.xxx;
                vec3 x2 = x0 - i2 + C.yyy; // 1.0/6.0 = 0.166666...
                vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.xxx = -0.5

                // Permutations
                i = mod289(i);
                vec4 p = permute( permute( permute(
                            i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
                        + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
                        + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

                // Gradients: 7x7 points over a square, mapped onto an octahedron.
                // The ring size 17*17 = 289 is close to 1/sf (~256)
                float n_ = 0.142857142857; // 1.0/7.0
                vec3  ns = n_ * D.wyz - D.xzx;

                vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

                vec4 x_ = floor(j * ns.z);
                vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)

                vec4 x = x_ *ns.x + ns.yyyy;
                vec4 y = y_ *ns.x + ns.yyyy;
                vec4 h = 1.0 - abs(x) - abs(y);

                vec4 b0 = vec4( x.xy, y.xy );
                vec4 b1 = vec4( x.zw, y.zw );

                vec4 s0 = floor(b0)*2.0 + 1.0;
                vec4 s1 = floor(b1)*2.0 + 1.0;
                vec4 sh = -step(h, vec4(0.0));

                vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
                vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

                vec3 p0 = vec3(a0.xy,h.x);
                vec3 p1 = vec3(a0.zw,h.y);
                vec3 p2 = vec3(a1.xy,h.z);
                vec3 p3 = vec3(a1.zw,h.w);

                //Normalise gradients
                vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));
                p0 *= norm.x;
                p1 *= norm.y;
                p2 *= norm.z;
                p3 *= norm.w;

                // Mix final noise value
                vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
                m = m * m;
                return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                                dot(p2,x2), dot(p3,x3) ) );
            }
    </script>
    
    <!-- Sun Core Shader -->
    <script type="x-shader/x-vertex" id="coreVertexShader">
        varying vec2 vUv; varying vec3 vNormal;
        void main() { vUv = uv; vNormal = normalize(normalMatrix * normal); gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }
    </script>
    <script type="x-shader/x-fragment" id="coreFragmentShader">
        varying vec2 vUv; varying vec3 vNormal; uniform float uTime; uniform float uCoreProximity; 
        // Noise code injected
        float fr(float b, float s, float p){ return b+s*pow(1.-dot(vNormal,vec3(0,0,1)),p); }
        void main() {
            float n=snoise(vec3(vUv*3.,uTime*.2)); n+=snoise(vec3(vUv*10.,uTime*.5))*.5; n=(n+1.)*.5; 
            vec3 cr=vec3(1.,.1,0.); vec3 co=vec3(1.,.5,0.); vec3 cy=vec3(1.,.9,0.);
            vec3 c=mix(cr,co,smoothstep(.2,.5,n)); c=mix(c,cy,smoothstep(.5,.7,n));
            float a=fr(.1,.9,7.); c+=cy*a*.8; 
            float h=snoise(vec3(vUv*5.,uTime*.3)); h=smoothstep(.8,.85,h); c+=vec3(1.,1.,.5)*h*.5;
            c+=vec3(.2,.15,0.)*uCoreProximity; 
            gl_FragColor=vec4(c,1.);
        }
    </script>

    <!-- Planet Shaders -->
    <script type="x-shader/x-vertex" id="planetVertexShader">
        varying vec2 vUv; varying vec3 vNormal;
        void main() { vUv = uv; vNormal = normalize(normalMatrix * normal); gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }
    </script>

    <!-- Terrestrial Planet Shader -->
    <script type="x-shader/x-fragment" id="terrestrialFragmentShader">
        varying vec2 vUv; varying vec3 vNormal; uniform float uTime; uniform float uShine;
        // Noise code injected
        float fr(float b, float s, float p){ return b+s*pow(1.-dot(vNormal,vec3(0,0,1)),p); }
        void main() {
            float n=snoise(vec3(vUv*5.,uTime*.05)); float l=smoothstep(.45,.5,n);
            vec3 lc=vec3(.2,.5,.1); vec3 wc=vec3(.1,.3,.6); vec3 c=mix(wc,lc,l);
            float cn=snoise(vec3(vUv*3.,uTime*.15)); float cl=smoothstep(.5,.7,cn);
            c=mix(c,vec3(1.),cl*.5); float a=fr(.1,.9,5.); c+=vec3(.3,.5,.8)*a;
            c+=vec3(1.)*uShine*(.5+a*.5); gl_FragColor=vec4(c,1.);
        }
    </script>
    
    <!-- Gas Giant Planet Shader (UPDATED with color uniforms) -->
    <script type="x-shader/x-fragment" id="gasGiantFragmentShader">
        varying vec2 vUv; varying vec3 vNormal; uniform float uTime; uniform float uShine;
        uniform vec3 uColor1; // New
        uniform vec3 uColor2; // New
        uniform vec3 uColor3; // New
        // Noise code injected
        float fr(float b, float s, float p){ return b+s*pow(1.-dot(vNormal,vec3(0,0,1)),p); }
        void main() {
            float n=snoise(vec3(vUv.y*10.,vUv.x*2.+uTime*.2,uTime*.1)); n=(n+1.)*.5;
            // Use uniforms instead of hardcoded colors
            vec3 c=mix(uColor1, uColor2, smoothstep(.4,.6,n)); 
            c=mix(c, uColor3, smoothstep(.7,.8,n));
            float a=fr(.1,.9,5.); c+=mix(uColor1, uColor3, 0.5) * a; // Mix atmosphere color too
            c+=vec3(1.)*uShine*(.5+a*.5);
            gl_FragColor=vec4(c,1.);
        }
    </script>
    
    <!-- Rocky Planet Shader -->
    <script type="x-shader/x-fragment" id="rockyFragmentShader">
       varying vec2 vUv; varying vec3 vNormal; uniform float uTime; uniform float uShine;
       // Noise code injected
       float fr(float b,float s,float p){return b+s*pow(1.-dot(vNormal,vec3(0,0,1)),p);}
       float R(vec2 n){return fract(sin(dot(n,vec2(12.9898,4.1414)))*43758.5453);}
       float cr(vec2 uv,vec2 p,float r){float d=distance(uv,p);float rm=smoothstep(r,r+.02,d);float ins=1.-smoothstep(r-.05,r,d);return(1.-rm)*ins;}
       void main(){float n=snoise(vec3(vUv*15.,uTime*.01));vec3 c=vec3(.5)+n*.2;float crs=0.;for(int i=0;i<5;i++){float fi=float(i);vec2 p=vec2(R(vec2(fi)),R(vec2(fi*2.)));float r=R(vec2(fi*3.))*.1+.05;crs+=cr(vUv,p,r);}c-=crs*.3;float a=fr(.05,.9,7.);c+=vec3(.6,.5,.4)*a;c+=vec3(1.)*uShine*(.5+a*.5);gl_FragColor=vec4(c,1.);}
    </script>

    <!-- Lava Planet Shader -->
    <script type="x-shader/x-fragment" id="lavaFragmentShader">
       varying vec2 vUv; varying vec3 vNormal; uniform float uTime; uniform float uShine;
       // Noise code injected
       float fr(float b,float s,float p){return b+s*pow(1.-dot(vNormal,vec3(0,0,1)),p);}
       void main(){float rn=snoise(vec3(vUv*10.,uTime*.02));vec3 c=vec3(.1,.05,.05)+rn*.1;float cn=snoise(vec3(vUv*5.,uTime*.1));float crk=smoothstep(.6,.65,cn);crk*=(1.-smoothstep(.65,.8,cn));vec3 lc=vec3(1.,.3,0.)*(1.+(sin(uTime*5.+vUv.x*10.)*.5+.5));c=mix(c,lc,crk*(.5+uShine*.5));float a=fr(.1,.9,5.);c+=vec3(.8,.2,0.)*a*.5;c+=vec3(1.,.5,0.)*uShine*.5;gl_FragColor=vec4(c,1.);}
    </script>
    
    <!-- Planet Ring Shader -->
    <script type="x-shader/x-fragment" id="ringFragmentShader">
       varying vec2 vUv; uniform float uTime;
       // Noise code injected
       void main(){float r=vUv.x;float ang=vUv.y*3.14159*2.;float n=snoise(vec3(r*20.,ang*10.,uTime*.1));n=smoothstep(.3,.7,n);float o=(1.-n)*.7;o*=smoothstep(0.,.1,r);o*=(1.-smoothstep(.9,1.,r));gl_FragColor=vec4(.8,.75,.7,o*.5);}
    </script>

    <!-- Nebula Shader -->
     <script type="x-shader/x-vertex" id="nebulaVertexShader">
        varying vec2 vUv;
        void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }
    </script>
    <script type="x-shader/x-fragment" id="nebulaFragmentShader">
        varying vec2 vUv; uniform float uTime; uniform vec3 uColor1; uniform vec3 uColor2;
        // Noise code injected
        void main() {
            float n=snoise(vec3(vUv*1.5,uTime*.02)); n+=snoise(vec3(vUv*5.,uTime*.05))*.3; n=(n+1.)*.5; 
            vec3 c=mix(uColor1,uColor2,smoothstep(.4,.6,n));
            float a=smoothstep(.3,.7,n)*.3; 
            float e=smoothstep(0.,.2,vUv.x)*(1.-smoothstep(.8,1.,vUv.x)); e*=smoothstep(0.,.2,vUv.y)*(1.-smoothstep(.8,1.,vUv.y));
            gl_FragColor=vec4(c,a*e*.5); 
        }
    </script>

    <!--
    ================================================================
    END GLSL SHADERS
    ================================================================
    -->

    <style>
        :root {
            --bg-color: #101010;
            --primary-accent: #D4AF37; 
            --secondary-text: #E0E0E0;
            --card-bg: #1A1A1A;
            --border-color: rgba(212, 175, 55, 0.2);
        }
        html, body { 
            scroll-behavior: smooth; width: 100%; height: 100%;
            margin: 0; padding: 0; overflow: hidden; 
             cursor: none !important; 
        }
        a, button, input, textarea, select, label,
        .project-card, .tech-card, .github-card, 
        .contact-icon-link, .filter-btn, .modal-close-btn, #mute-btn {
             cursor: none !important;
        }

        body {
            font-family: 'Inter', sans-serif; background-color: var(--bg-color); 
            background-image: url('https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/Space.gif');
            background-size: cover; background-position: center center; background-repeat: no-repeat;
            color: var(--secondary-text); position: relative; 
        }
        body::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.75); z-index: -1; 
        }
        body.loading { overflow: hidden; }

        #main-canvas { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: transparent; z-index: 1; 
        }
        
        #custom-cursor {
            position: fixed; top: 0; left: 0; z-index: 9999; 
            pointer-events: none; mix-blend-mode: difference; 
            transform: translate(-50%, -50%); 
            transition: opacity 0.3s, transform 0.05s linear; 
            opacity: 0; 
        }
        #custom-cursor img {
             width: 32px; height: 32px; display: block; 
             transition: transform 0.2s ease-out; 
        }
        #custom-cursor .cursor-pointer { display: none; } 
        #custom-cursor.hover .cursor-default { display: none; } 
        #custom-cursor.hover .cursor-pointer { display: block; } 
        #custom-cursor.clicked img { transform: scale(0.8); } 

        .header {
            position: fixed; top: 0; left: 0; width: 100%;
            background-color: rgba(16, 16, 16, 0.7); backdrop-filter: blur(12px); z-index: 100;
        }
        .font-serif { font-family: 'DM Serif Display', serif; }
        .nav-link { transition: color 0.3s; }
        .nav-link:hover, .nav-link.active { color: var(--primary-accent); }
        .resume-btn {
            border: 1px solid var(--primary-accent); color: var(--primary-accent);
            padding: 0.3rem 0.8rem; border-radius: 9999px; transition: all 0.3s ease;
        }
        .resume-btn:hover, .resume-btn.active { /* Added .active state */
            background-color: var(--primary-accent); color: var(--bg-color); 
        }

        .content-panel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(16, 16, 16, 0.9); backdrop-filter: blur(10px);
            z-index: 50; opacity: 0; pointer-events: none;
            transition: opacity 0.5s ease-in-out; overflow-y: auto;
        }
        .content-panel.active { opacity: 1; pointer-events: all; }
        .content-wrapper {
            max-width: 1200px; margin: 0 auto;
            padding: 6rem 1rem 4rem 1rem; 
        }
         @media (min-width: 768px) { .content-wrapper { padding: 8rem 2rem 4rem 2rem; } }

        .section-head { 
            font-family: 'DM Serif Display', serif; color: #fff; font-weight: 700; 
            overflow: hidden; font-size: 2.5rem; 
        }
         @media (min-width: 640px) { .section-head { font-size: 3.75rem; } } 
         @media (min-width: 1024px) { .section-head { font-size: 4.5rem; } } 
        .section-head .char { transform: translateY(115%); transition: transform .5s; }
        .section-subhead { 
            color: var(--primary-accent); text-transform: uppercase; 
            letter-spacing: 2px; font-weight: 500; font-size: 0.875rem; 
        }
         @media (min-width: 768px) { .section-subhead { font-size: 1rem; } } 
        
        .project-card, .experience-card, .tech-card, .github-card {
            background: var(--card-bg); transition: all 0.4s ease;
            border: 1px solid var(--border-color);
        }
        .project-card:hover, .tech-card:hover, .github-card:hover {
            transform: translateY(-8px); border-color: var(--primary-accent);
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
        }

        .tag { font-size: 14px; font-weight: bold; }
        .gold-text-gradient { 
            background: linear-gradient(90deg, #D4AF37, #F0E68C); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
        }

        .timeline { position: relative; max-width: 1200px; margin: 0 auto; }
        .timeline::after { content: ''; position: absolute; width: 2px; background-color: var(--border-color); top: 0; bottom: 0; left: 31px; margin-left: -1px; } 
        .timeline-container { padding: 10px 0 10px 50px; position: relative; background-color: inherit; width: 100%; } 
        .timeline-container.left, .timeline-container.right { left: 0; } 
        .timeline-container::after { content: ''; position: absolute; width: 18px; height: 18px; left: 22px; background-color: var(--bg-color); border: 2px solid var(--primary-accent); top: 25px; border-radius: 50%; z-index: 1; } 
        .timeline-container.right::after { left: 22px; } 
        .timeline-content { padding: 15px 20px; background: var(--card-bg); position: relative; border-radius: 8px; border: 1px solid var(--border-color); } 
         @media (min-width: 768px) { 
            .timeline::after { left: 50%; }
            .timeline-container { padding: 10px 40px; width: 50%; }
            .timeline-container.left { left: 0; }
            .timeline-container.right { left: 50%; }
            .timeline-container.left::after { right: -9px; left: auto; } 
            .timeline-container.right::after { left: -9px; } 
            .timeline-content { padding: 20px 30px; }
        }

        .gsap-reveal { opacity: 0; transform: translateY(40px); }
        .contact-icon-link {
            display: flex; justify-content: center; align-items: center;
            width: 50px; height: 50px; 
            background-color: var(--card-bg); border: 1px solid var(--border-color);
            border-radius: 50%; transition: all 0.3s ease;
        }
         @media (min-width: 768px) { .contact-icon-link { width: 64px; height: 64px; } } 
        .contact-icon-link:hover { transform: scale(1.1); background-color: var(--primary-accent); border-color: var(--primary-accent); }
        .contact-icon-link svg { width: 1.5rem; height: 1.5rem; color: #E0E0E0; transition: color 0.3s; } 
         @media (min-width: 768px) { .contact-icon-link svg { width: 2rem; height: 2rem; } } 
        .contact-icon-link:hover svg { color: #101010; }

        /* Updated Modal Styles */
        #project-modal, #tech-modal, #add-project-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 100;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.4s ease; padding: 1rem; 
        }
        #project-modal.active, #tech-modal.active, #add-project-modal.active { opacity: 1; pointer-events: all; }
        
        .modal-content {
            background: var(--card-bg); border: 1px solid var(--border-color);
            border-radius: 8px; width: 100%; max-width: 900px; max-height: 90vh; 
            overflow-y: auto; transform: scale(0.95); transition: transform 0.4s ease;
        }
         @media (min-width: 768px) { .modal-content { width: 90%; } } 
        #add-project-modal .modal-content { max-width: 600px; } 


        #project-modal.active .modal-content, #tech-modal.active .modal-content, #add-project-modal.active .modal-content { transform: scale(1); }
        
        .modal-close-btn {
            position: absolute; top: 1rem; right: 1rem; color: white; 
            transition: color 0.3s, transform 0.3s; z-index: 110; 
        }
         @media (min-width: 768px) { .modal-close-btn { top: 1.5rem; right: 1.5rem; } } 
        .modal-close-btn:hover { color: var(--primary-accent); transform: rotate(90deg); }

        .filter-btn {
            background-color: transparent; border: 1px solid var(--border-color);
            color: var(--secondary-text); padding: 0.5rem 1rem; border-radius: 9999px; 
            transition: all 0.3s ease; font-weight: 500; font-size: 0.875rem; 
        }
         @media (min-width: 768px) { .filter-btn { padding: 0.5rem 1.5rem; font-size: 1rem; } } 
        .filter-btn:hover { background-color: rgba(212, 175, 55, 0.1); border-color: var(--primary-accent); color: white; }
        .filter-btn.active { background-color: var(--primary-accent); color: var(--bg-color); border-color: var(--primary-accent); }
        
        /* REMOVED: Add Project Form Styles */

        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 1rem; 
        }
        .loader-orb {
            width: 50px; height: 50px; border-radius: 50%; background: var(--primary-accent);
            box-shadow: 0 0 20px var(--primary-accent), 0 0 40px var(--primary-accent);
            animation: pulse 2s infinite ease-in-out;
        }
        #preloader p { color: var(--secondary-text); font-size: 1rem; letter-spacing: 1px; }
        @keyframes pulse { 0%, 100% { transform: scale(0.8); opacity: 0.7; } 50% { transform: scale(1); opacity: 1; } }
        
        #mute-btn {
            position: fixed; bottom: 1rem; right: 1rem; 
            z-index: 1000; background: rgba(255,255,255,0.1); 
            padding: 0.4rem; border-radius: 50%; 
            transition: background-color 0.3s;
        }
         @media (min-width: 768px) { #mute-btn { bottom: 1.25rem; right: 1.25rem; padding: 0.5rem; } } 
        #mute-btn:hover { background: rgba(255,255,255,0.2); }
         #mute-btn svg { width: 1.25rem; height: 1.25rem; } 
         @media (min-width: 768px) { #mute-btn svg { width: 1.5rem; height: 1.5rem; } } 

        .tech-card img { filter: grayscale(100%) opacity(0.7); transition: filter 0.4s ease; }
        .tech-card:hover img { filter: grayscale(0%) opacity(1); }
        .tech-card .tech-name { opacity: 0; transform: translateY(10px); transition: all 0.4s ease; }
        .tech-card:hover .tech-name { opacity: 1; transform: translateY(0); }

    </style>
</head>
<body class="relative loading">

    <div id="preloader">
        <div class="loader-orb"></div>
        <p>Loading Universe...</p> 
    </div>
    
    <div id="custom-cursor">
        <img src="https://raw.githubusercontent.com/Monish21072004/Portfolio/main/cursor/Star%20Wars%20C-3PO--pointer--SweezyCursors.png" alt="Default Cursor" class="cursor-default">
        <img src="https://raw.githubusercontent.com/Monish21072004/Portfolio/main/cursor/Star%20Wars%20C-3PO--cursor--SweezyCursors.png" alt="Pointer Cursor" class="cursor-pointer">
    </div>

    <button id="mute-btn">
        <svg id="sound-on-icon" class="text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707a1 1 0 011.414 0v14a1 1 0 01-1.414 0L5.586 15z"></path></svg>
        <svg id="sound-off-icon" class="text-white hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707a1 1 0 011.414 0v14a1 1 0 01-1.414 0L5.586 15zM17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>
    </button>

    <header class="header fixed top-0 left-0 w-full z-20 px-4 sm:px-8 py-3 md:py-5"> 
        <div class="w-full flex justify-between items-center max-w-7xl mx-auto">
            <a href="#" class="nav-link text-white text-xl md:text-2xl font-serif font-bold" data-target="home"> 
                Monish V
            </a>
            <nav id="desktop-nav" class="hidden md:flex items-center list-none gap-6 lg:gap-8"> 
                <a href="#about" class="nav-link text-base lg:text-lg font-medium" data-target="about">About</a> 
                <a href="#philosophy" class="nav-link text-base lg:text-lg font-medium" data-target="philosophy">Philosophy</a>
                <a href="#experience" class="nav-link text-base lg:text-lg font-medium" data-target="experience">Experience</a>
                <a href="#github-stats" class="nav-link text-base lg:text-lg font-medium" data-target="github-stats">GitHub</a>
                <a href="#tech" class="nav-link text-base lg:text-lg font-medium" data-target="tech">Tech</a>
                <a href="#projects" class="nav-link text-base lg:text-lg font-medium" data-target="projects">Projects</a>
                <a href="#contact" class="nav-link text-base lg:text-lg font-medium" data-target="contact">Contact</a>
                <!-- NEW: Explore Mode Button -->
                <button id="explore-btn" class="resume-btn text-sm lg:text-lg font-medium ml-2">Explore Mode</button>
                <a href="https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/documents/MonishCV2.pdf" target="_blank" class="resume-btn nav-link text-sm lg:text-lg font-medium ml-2">Download Resume</a> 
            </nav>
            <div class="md:hidden flex items-center">
                <!-- Add Explore button for mobile too if needed -->
                <button id="mobile-menu-button" class="text-white focus:outline-none z-30">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg> 
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-black bg-opacity-95 backdrop-blur-sm">
            <div class="flex flex-col items-center py-4 space-y-3"> 
                <a href="#about" class="nav-link mobile-nav-link text-lg font-medium" data-target="about">About</a>
                <a href="#philosophy" class="nav-link mobile-nav-link text-lg font-medium" data-target="philosophy">Philosophy</a>
                <a href="#experience" class="nav-link mobile-nav-link text-lg font-medium" data-target="experience">Experience</a>
                <a href="#github-stats" class="nav-link mobile-nav-link text-lg font-medium" data-target="github-stats">GitHub</a>
                <a href="#tech" class="nav-link mobile-nav-link text-lg font-medium" data-target="tech">Tech</a>
                <a href="#projects" class="nav-link mobile-nav-link text-lg font-medium" data-target="projects">Projects</a>
                <a href="#contact" class="nav-link mobile-nav-link text-lg font-medium" data-target="contact">Contact</a>
                 <!-- NEW: Explore Mode Button (Mobile) -->
                <button id="mobile-explore-btn" class="resume-btn nav-link text-lg font-medium text-[var(--primary-accent)] mt-2">Explore Mode</button>
                <a href="https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/documents/MonishCV2.pdf" target="_blank" class="resume-btn nav-link text-lg font-medium text-[var(--primary-accent)] mt-2">Download Resume</a>
            </div>
        </div>
    </header>

    <canvas id="main-canvas"></canvas>

    <div id="home-content" class="absolute inset-0 flex justify-center items-center z-10 pointer-events-none px-4"> 
        <div class="text-center">
            <h1 class="font-serif text-white font-bold text-5xl sm:text-7xl lg:text-8xl lg:leading-tight"> 
                Monish V
            </h1>
            <p class="text-gray-300 font-light text-lg sm:text-xl lg:text-2xl mt-3 md:mt-4 max-w-xs sm:max-w-2xl mx-auto"> 
                Architect of Intelligent Systems & Digital Experiences
            </p>
        </div>
    </div>

    <!-- Content Panels -->
    <div id="about" class="content-panel">
        <div class="content-wrapper">
             <div class="gsap-reveal"> <p class="section-subhead">Introduction</p> <h2 class="section-head">Overview.</h2> </div>
            <p class="mt-6 md:mt-8 text-base md:text-xl max-w-4xl leading-relaxed gsap-reveal"> 
                I am a versatile developer with a passion for building intelligent, data-driven solutions at the intersection of AI/ML and full-stack engineering. My work focuses on transforming complex problems into elegant, efficient, and scalable applications. As a collaborative and curious learner, I'm driven to architect systems that are not only functional but also deliver a premium user experience. Let's create something extraordinary.
            </p>
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> 
    </div>
    
    <div id="philosophy" class="content-panel">
         <div class="content-wrapper flex items-center justify-center"> 
            <div class="gsap-reveal text-center max-w-3xl mx-auto">
                <p class="section-subhead">My Philosophy</p>
                <blockquote class="mt-4 text-white text-xl md:text-3xl font-serif italic"> 
                    "I believe in building applications that not only solve complex, real-world problems, but do so in a way that is accessible, intuitive, and genuinely helpful to people."
                </blockquote>
            </div>
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>

    <div id="experience" class="content-panel">
        <div class="content-wrapper">
            <div class="gsap-reveal text-center"> <p class="section-subhead">Chronology</p> <h2 class="section-head">Experience.</h2> </div>
            <div id="experience-container" class="timeline mt-12 md:mt-20"></div> 
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>
    
    <!-- Restored GitHub Panel HTML -->
    <div id="github-stats" class="content-panel">
        <div class="content-wrapper">
             <div class="gsap-reveal text-center"> 
                 <p class="section-subhead">Live from GitHub</p> 
                 <h2 class="section-head">Activity.</h2> 
             </div>
            <div class="mt-10 md:mt-12 grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-4xl mx-auto"> 
                <div class="github-card p-6 md:p-8 rounded-2xl text-center gsap-reveal"> 
                    <h3 class="text-white text-3xl md:text-4xl font-bold" id="repo-count">...</h3> 
                    <p class="text-secondary-text mt-2 text-sm md:text-base">Public Repositories</p> 
                </div>
                <div class="github-card p-6 md:p-8 rounded-2xl text-center gsap-reveal">
                    <h3 class="text-white text-3xl md:text-4xl font-bold" id="star-count">...</h3>
                    <p class="text-secondary-text mt-2 text-sm md:text-base">Total Stars</p>
                </div>
            </div>
            <div class="mt-10 md:mt-12 text-center gsap-reveal">
                <a href="https://github.com/Monish21072004" target="_blank" rel="noopener noreferrer" class="inline-block bg-transparent border border-[var(--primary-accent)] text-[var(--primary-accent)] font-bold py-2 px-6 md:py-3 md:px-8 rounded-full text-base md:text-lg transition-all hover:scale-105 hover:bg-[var(--primary-accent)] hover:text-black"> 
                    View My GitHub Profile
                </a>
            </div>
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>

    <div id="tech" class="content-panel">
         <div class="content-wrapper">
            <div class="gsap-reveal text-center"> <h2 class="section-head">Technologies.</h2> </div>
            <div id="tech-icons-container" class="mt-12 md:mt-20 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4 md:gap-8"></div> 
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>

    <div id="projects" class="content-panel">
        <div class="content-wrapper">
            <div class="gsap-reveal text-center"> <p class="section-subhead">Case Studies</p> <h2 class="section-head">Projects.</h2> </div>
             <div class="w-full flex flex-col items-center gsap-reveal">
                <p class="mt-4 md:mt-6 text-base md:text-lg text-secondary-text max-w-3xl text-center"> 
                    My projects demonstrate my skills through real-world examples...
                </p>
                <!-- Project Filters container -->
                <div id="project-filters" class="mt-6 md:mt-8 flex flex-wrap gap-3 md:gap-4 justify-center">
                    <!-- Buttons are added by JS -->
                </div> 
                 <!-- REMOVED Add New Project Button -->
            </div>
            <div id="projects-container" class="mt-12 md:mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"></div> 
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>
    
    <div id="contact" class="content-panel">
        <div class="content-wrapper">
            <div class="gsap-reveal bg-[var(--card-bg)] p-6 md:p-12 rounded-2xl max-w-4xl mx-auto text-center"> 
                <p class="section-subhead">Connect</p> 
                <h3 class="section-head">Get in Touch.</h3>
                <p class="mt-4 md:mt-6 text-base md:text-lg">I'm currently open to new opportunities...</p> 
                <div id="contact-icons" class="mt-8 md:mt-12 flex items-center justify-center gap-6 md:gap-8">
                    <!-- Icons added by JS -->
                </div> 
            </div>
        </div>
        <button class="modal-close-btn content-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            <img id="modal-project-image" src="" alt="Project Image" class="w-full h-48 sm:h-64 object-cover rounded-t-lg"> 
            <div class="p-4 sm:p-6 md:p-8"> 
                <h3 id="modal-project-title" class="text-white font-bold text-2xl md:text-3xl"></h3> 
                <div id="modal-project-tags" class="mt-3 md:mt-4 flex flex-wrap gap-x-3 md:gap-x-4 gap-y-1"></div> 
                <p id="modal-project-desc" class="mt-3 md:mt-4 text-gray-300 leading-relaxed text-sm md:text-base"></p> 
                <div class="mt-4 md:mt-6 flex flex-wrap gap-3 md:gap-4"> 
                    <a id="modal-project-link" href="#" target="_blank" rel="noopener noreferrer" class="inline-block bg-[var(--primary-accent)] text-black font-bold py-2 px-6 rounded-md transition-transform hover:scale-105">View on GitHub</a>
                    <a id="modal-project-demo-link" href="#" target="_blank" rel="noopener noreferrer" class="inline-block bg-transparent border border-[var(--primary-accent)] text-[var(--primary-accent)] font-bold py-2 px-6 rounded-md transition-all hover:scale-105 hover:bg-[var(--primary-accent)] hover:text-black">Live Demo</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tech Modal -->
    <div id="tech-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn"><svg class="w-7 h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            <div class="p-6 md:p-8 flex flex-col items-center text-center">
                <img id="modal-tech-image" src="" alt="Tech Image" class="w-24 h-24 md:w-32 md:h-32 object-contain"> 
                <h3 id="modal-tech-title" class="text-white font-bold text-2xl md:text-3xl mt-4"></h3> 
                <p id="modal-tech-desc" class="mt-3 md:mt-4 text-gray-300 leading-relaxed max-w-md text-sm md:text-base"></p> 
            </div>
        </div>
    </div>

    <!-- REMOVED Add Project Modal -->
    
    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { FontLoader } from 'three/addons/loaders/FontLoader.js';
        import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

            const clock = new THREE.Clock();
            const mouse = new THREE.Vector2();
            const customCursor = document.getElementById('custom-cursor'); 
            let soundsReady = false;
            let isMuted = true;
            let mainScene, mainCamera, mainRenderer, raycaster, controls, asteroidBelt; // Added asteroidBelt
            let hoveredNode = null;
            const navNodes = []; 
            const homePosition = new THREE.Vector3(0, 5, 25); 
            const accentColor = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--primary-accent'));
            let coreGroup, sunCore, wireframeCore; 
            let coreBeat = { intensity: 1.0 }; 
            let lastMousePos = { x: 0, y: 0 }; 
            let nebulaPlane; 
            let isExploreMode = false; // NEW state for explore mode
            const textureLoader = new THREE.TextureLoader(); // NEW: Define texture loader globally

            // --- JS Smoothstep function ---
             function smoothstep(edge0, edge1, x) {
                x = Math.max(0, Math.min(1, (x - edge0) / (edge1 - edge0)));
                return x * x * (3 - 2 * x);
            }
           
            // --- SOUND DESIGN ---
            // NEW: Ambient space drone
            const ambientDrone = new Tone.AutoFilter({
                frequency: "8n",
                baseFrequency: 100,
                octaves: 4,
                filter: { type: "lowpass", Q: 2 },
            }).toDestination().start();
            const noise = new Tone.Noise("brown").connect(ambientDrone);
            noise.volume.value = -30; // Very subtle

            const reverb = new Tone.Freeverb({ roomSize: 0.7, dampening: 4000 }).toDestination();
            const hoverSound = new Tone.Synth({ oscillator: { type: "sine" }, envelope: { attack: 0.001, decay: 0.1, sustain: 0.01, release: 0.1 } }).connect(reverb);
            hoverSound.volume.value = -20; 
            const clickSound = new Tone.FMSynth({ modulationIndex: 10, envelope: { attack: 0.001, decay: 0.05 }, modulationEnvelope: { attack: 0.001, decay: 0.02 } }).toDestination();
            clickSound.volume.value = -15; 
            const heartbeatSound = new Tone.MembraneSynth({ pitchDecay: 0.008, octaves: 3, oscillator: { type: 'sine' }, envelope: { attack: 0.001, decay: 0.25, sustain: 0.005, release: 0.1 } }).toDestination();
            heartbeatSound.volume.value = -8; 
            
            function playHover() { if (!isMuted) hoverSound.triggerAttackRelease("C6", "32n"); } 
            function playClick() { 
                if (!isMuted) {
                    if (Tone.context.state !== 'running') { Tone.context.resume(); }
                    clickSound.triggerAttackRelease("C4", "32n", Tone.now()); 
                }
            } 
            
            // --- Heartbeat ---
            function triggerHeartbeat() {
                if (soundsReady && !isMuted) {
                    const play = () => {
                        const now = Tone.now();
                        heartbeatSound.triggerAttackRelease('C1', '8n', now); 
                        heartbeatSound.triggerAttackRelease('C1', '8n', now + 0.2); 
                    };
                    if (Tone.context.state !== 'running') { Tone.context.resume().then(play); } 
                    else { play(); }
                }
                gsap.timeline()
                    .to(coreBeat, { intensity: 1.15, duration: 0.1, ease: 'power2.out' }) 
                    .to(coreBeat, { intensity: 1.0, duration: 0.1, ease: 'power2.in' }) 
                    .to(coreBeat, { intensity: 1.25, duration: 0.1, delay: 0.05, ease: 'power2.out' }) 
                    .to(coreBeat, { intensity: 1.0, duration: 0.4, ease: 'power2.in' }); 
                const nextDelay = 3000 + Math.random() * 1000; 
                setTimeout(triggerHeartbeat, nextDelay);
            }

            // --- PRELOADER ---
            window.addEventListener('load', () => {
                gsap.to('#preloader', { opacity: 0, duration: 0.8, onComplete: () => {
                    document.getElementById('preloader').style.display = 'none';
                    document.body.classList.remove('loading');
                    setTimeout(triggerHeartbeat, 500); 
                }});
            });

            function initMainScene() {
                const noiseCode = document.getElementById('glsl-noise').textContent; 

                mainScene = new THREE.Scene();
                mainCamera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
                mainCamera.position.copy(homePosition);
                
                const canvas = document.getElementById('main-canvas');
                mainRenderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
                mainRenderer.setSize(window.innerWidth, window.innerHeight);
                mainRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                mainRenderer.setClearColor(0x000000, 0); 

                raycaster = new THREE.Raycaster(); raycaster.near = 0.1; raycaster.far = 50;
                
                controls = new OrbitControls(mainCamera, mainRenderer.domElement);
                controls.enabled = false; // Disabled by default, enabled by Explore Mode
                controls.enableDamping = true; controls.dampingFactor = 0.05; 
                controls.target.set(0, 0, 0);
                controls.minDistance = 5; // Prevent zooming inside core
                controls.maxDistance = 50; // Prevent zooming too far out

                mainScene.add(new THREE.AmbientLight(0xffffff, 0.5)); // Slightly brighter ambient
                const pointLight = new THREE.PointLight(0xffffff, 1.0); pointLight.position.set(0, 0, 0); mainScene.add(pointLight);

                // Starfield
                const starGeometry = new THREE.BufferGeometry(); const starVertices = [];
                for (let i = 0; i < 10000; i++) { starVertices.push((Math.random()-0.5)*300, (Math.random()-0.5)*300, (Math.random()-0.5)*300); } 
                starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
                const starMaterial = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 0.15, transparent: true, opacity: 0.6 }); 
                const stars = new THREE.Points(starGeometry, starMaterial); mainScene.add(stars);

                 // --- Nebula Effect ---
                const nebulaMaterial = new THREE.ShaderMaterial({
                    vertexShader: document.getElementById('nebulaVertexShader').textContent,
                    fragmentShader: noiseCode + document.getElementById('nebulaFragmentShader').textContent,
                    uniforms: { uTime: { value: 0 }, uColor1: { value: new THREE.Color(0x1a0033) }, uColor2: { value: new THREE.Color(0x003366) } },
                    transparent: true, blending: THREE.AdditiveBlending, depthWrite: false 
                });
                nebulaPlane = new THREE.Mesh(new THREE.PlaneGeometry(300, 300), nebulaMaterial);
                nebulaPlane.position.z = -150; 
                mainScene.add(nebulaPlane);

                // --- AI Core ---
                coreGroup = new THREE.Group(); coreGroup.position.set(0, 0, 0); mainScene.add(coreGroup);
                const coreGeom = new THREE.IcosahedronGeometry(2.2, 5); 
                const coreMat = new THREE.ShaderMaterial({
                    vertexShader: document.getElementById('coreVertexShader').textContent,
                    fragmentShader: noiseCode + document.getElementById('coreFragmentShader').textContent,
                    uniforms: { uTime: { value: 0 }, uCoreProximity: { value: 0.0 } } 
                });
                sunCore = new THREE.Mesh(coreGeom, coreMat); coreGroup.add(sunCore);
                const wireframeMat = new THREE.MeshBasicMaterial({ color: accentColor, wireframe: true, transparent: true, opacity: 0.8 });
                wireframeCore = new THREE.Mesh(coreGeom, wireframeMat); coreGroup.add(wireframeCore);
                const ringGeom = new THREE.TorusGeometry(3.5, 0.03, 16, 100); const ringMat = new THREE.MeshBasicMaterial({ color: accentColor, opacity: 0.8, transparent: true }); 
                const ring1 = new THREE.Mesh(ringGeom, ringMat); ring1.rotation.x = Math.PI / 2; const ring2 = ring1.clone(); ring2.rotation.y = Math.PI / 2; coreGroup.add(ring1, ring2);
                const particlesGeom = new THREE.SphereGeometry(4.2, 32, 32); const particlesMat = new THREE.PointsMaterial({ color: 0xffa500, size: 0.02, blending: THREE.AdditiveBlending, transparent: true, opacity: 0.7 });
                const particles = new THREE.Points(particlesGeom, particlesMat); coreGroup.add(particles);

                // --- Asteroid Belt ---
                const asteroidCount = 1500;
                const asteroidGeometry = new THREE.IcosahedronGeometry(0.1, 0); // Simple shape
                const asteroidMaterial = new THREE.MeshStandardMaterial({ color: 0x888888, roughness: 1.0 });
                asteroidBelt = new THREE.InstancedMesh(asteroidGeometry, asteroidMaterial, asteroidCount);
                
                const dummy = new THREE.Object3D();
                const matrix = new THREE.Matrix4();
                const beltRadius = 12.5; // Average radius
                const beltWidth = 3;     // Width of the belt
                
                for (let i = 0; i < asteroidCount; i++) {
                    const radius = beltRadius + (Math.random() - 0.5) * beltWidth;
                    const angle = Math.random() * Math.PI * 2;
                    const y = (Math.random() - 0.5) * 0.2; // Slight inclination
                    
                    dummy.position.set(Math.cos(angle) * radius, y, Math.sin(angle) * radius);
                    dummy.scale.setScalar(0.2 + Math.random() * 0.7);
                    dummy.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);
                    dummy.updateMatrix();
                    asteroidBelt.setMatrixAt(i, dummy.matrix);
                }
                mainScene.add(asteroidBelt);


                // --- Planets ---
                const planetGeometry = new THREE.SphereGeometry(0.8, 32, 32); 
                const navItems = [ 
                    { id: 'about', label: 'About', radius: 6, speed: 0.12, inclination: 0.1, eccentricity: 0.02, shader: 'terrestrialFragmentShader' },
                    { id: 'philosophy', label: 'Philosophy', radius: 8, speed: 0.1, inclination: -0.05, eccentricity: 0.05, shader: 'rockyFragmentShader' },
                    { id: 'tech', label: 'Tech', radius: 14, speed: 0.06, inclination: -0.1, eccentricity: 0.03, shader: 'gasGiantFragmentShader', 
                      colorSet: [new THREE.Color(0x2a4d69), new THREE.Color(0x4b86b4), new THREE.Color(0xadcbe3)] }, 
                    { id: 'projects', label: 'Projects', radius: 17, speed: 0.05, inclination: 0.05, eccentricity: 0.06, shader: 'gasGiantFragmentShader', 
                      colorSet: [new THREE.Color(0x8c4b2f), new THREE.Color(0xda9a7a), new THREE.Color(0xffdcb3)] }, 
                    { id: 'github-stats', label: 'GitHub', radius: 11, speed: 0.08, inclination: 0.15, eccentricity: 0.08, shader: 'lavaFragmentShader' },
                    { id: 'contact', label: 'Contact', radius: 20, speed: 0.04, inclination: 0.0, eccentricity: 0.01, shader: 'terrestrialFragmentShader' } 
                ];
                // Tech Moons Data (URLs from technologiesData)
                const techMoonData = [
                    { icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg", pos: [1, 0, 0.2] },
                    { icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg", pos: [-0.5, 0.2, 1] },
                    { icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/tensorflow/tensorflow-original.svg", pos: [-0.2, -0.8, -0.8] }
                ];

                const fontLoader = new FontLoader();
                fontLoader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', (font) => {
                    const textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0 });
                    navItems.forEach((item, i) => {
                        const nodeGroup = new THREE.Group(); nodeGroup.name = item.id; nodeGroup.userData = item; 
                        
                        const uniforms = { uTime: { value: 0 }, uShine: { value: 0.0 } };
                        if (item.colorSet) {
                            uniforms.uColor1 = { value: item.colorSet[0] };
                            uniforms.uColor2 = { value: item.colorSet[1] };
                            uniforms.uColor3 = { value: item.colorSet[2] };
                        }
                        const planetMaterial = new THREE.ShaderMaterial({
                            vertexShader: document.getElementById('planetVertexShader').textContent,
                            fragmentShader: noiseCode + document.getElementById(item.shader).textContent,
                            uniforms: uniforms
                        });

                        const planetMesh = new THREE.Mesh(planetGeometry, planetMaterial); planetMesh.name = item.id; nodeGroup.add(planetMesh);
                        if (item.id === 'contact') {
                            const ringGeom = new THREE.RingGeometry(1.2, 1.8, 64);
                            const ringMaterial = new THREE.ShaderMaterial({ vertexShader: document.getElementById('planetVertexShader').textContent, fragmentShader: noiseCode + document.getElementById('ringFragmentShader').textContent, uniforms: { uTime: { value: 0 } }, transparent: true, side: THREE.DoubleSide });
                            const ringMesh = new THREE.Mesh(ringGeom, ringMaterial); ringMesh.rotation.x = Math.PI * 0.4; nodeGroup.add(ringMesh);
                        }
                        // NEW: Add Tech Moons
                        if (item.id === 'tech') {
                            techMoonData.forEach((moonData, moonIndex) => {
                                const texture = textureLoader.load(moonData.icon);
                                const material = new THREE.MeshBasicMaterial({ map: texture, transparent: true, side: THREE.DoubleSide, depthWrite: false });
                                const geometry = new THREE.PlaneGeometry(0.5, 0.5);
                                const mesh = new THREE.Mesh(geometry, material);
                                mesh.position.set(moonData.pos[0], moonData.pos[1], moonData.pos[2]).normalize().multiplyScalar(1.4); // Orbit distance
                                mesh.userData.orbitSpeed = 0.2 + Math.random() * 0.3; // Random speed
                                mesh.userData.orbitAxis = new THREE.Vector3(Math.random() - 0.5, 1, Math.random() - 0.5).normalize(); // Random axis
                                mesh.name = "tech-moon";
                                nodeGroup.add(mesh);
                            });
                        }

                        const textGeom = new TextGeometry(item.label, { font: font, size: 0.4, height: 0.05 }); textGeom.center();
                        const textMesh = new THREE.Mesh(textGeom, textMaterial.clone()); textMesh.position.y = 1.3; textMesh.name = "text"; nodeGroup.add(textMesh);
                        const angle = i * (Math.PI * 2 / navItems.length);
                        nodeGroup.position.x = Math.cos(angle) * item.radius; nodeGroup.position.z = Math.sin(angle) * item.radius;
                        mainScene.add(nodeGroup); navNodes.push(nodeGroup);
                    });
                });

                // --- Animation Loop ---
                const animate = () => {
                    requestAnimationFrame(animate);
                    const elapsedTime = clock.getElapsedTime();
                    
                    if (sunCore && wireframeCore) { 
                        sunCore.scale.setScalar(coreBeat.intensity * 0.75); 
                        wireframeCore.scale.setScalar(coreBeat.intensity * 1.0); 
                        sunCore.material.uniforms.uTime.value = elapsedTime * 0.5; 
                    }
                    ring1.rotation.z = elapsedTime * 0.2; ring2.rotation.z = elapsedTime * 0.2; particles.rotation.y = -elapsedTime * 0.05; coreGroup.rotation.y = elapsedTime * 0.1;
                    
                    // Animate Asteroid Belt
                    if (asteroidBelt) { asteroidBelt.rotation.y = elapsedTime * 0.03; }

                    navNodes.forEach((node) => {
                        const data = node.userData; const angle = elapsedTime * data.speed; const e = data.eccentricity; 
                        const r = data.radius * (1 - e*e) / (1 + e * Math.cos(angle));
                        node.position.x = Math.cos(angle) * r; node.position.y = Math.sin(angle) * r * Math.sin(data.inclination); node.position.z = Math.sin(angle) * r * Math.cos(data.inclination);
                        const planetMesh = node.children[0]; 
                        if (planetMesh.material.uniforms.uTime) {
                           planetMesh.material.uniforms.uTime.value = elapsedTime;
                        }
                        planetMesh.rotation.y += 0.001; 
                        if(data.id === 'contact' && node.children[1] && node.children[1].material.uniforms.uTime) { 
                            node.children[1].material.uniforms.uTime.value = elapsedTime; 
                        }
                        
                        // Animate Tech Moons
                        if(data.id === 'tech') {
                            node.children.forEach(child => {
                                if (child.name === "tech-moon") {
                                    child.position.applyAxisAngle(child.userData.orbitAxis, 0.01 * child.userData.orbitSpeed);
                                    child.quaternion.copy(mainCamera.quaternion); // Always face camera
                                }
                            });
                        }

                        const textMesh = node.getObjectByName("text"); if (textMesh) { textMesh.quaternion.copy(mainCamera.quaternion); }
                    });

                    if (nebulaPlane) { nebulaPlane.material.uniforms.uTime.value = elapsedTime; }

                    let coreProximityValue = 0;
                    // Only run raycaster and parallax if NOT in explore mode
                    if (!isExploreMode) {
                        if (document.querySelectorAll('.content-panel.active').length === 0) {
                            raycaster.setFromCamera(mouse, mainCamera);
                            const planetMeshes = navNodes.map(group => group.children[0]);
                            const intersects = raycaster.intersectObjects(planetMeshes);
                            if (intersects.length > 0) {
                                const intersectedGroup = intersects[0].object.parent;
                                if (hoveredNode !== intersectedGroup) {
                                    if (hoveredNode) { gsap.to(hoveredNode.children[0].material.uniforms.uShine, { value: 0, duration: 0.5 }); const oldText = hoveredNode.getObjectByName("text"); if (oldText) gsap.to(oldText.material, { opacity: 0, duration: 0.5 }); customCursor.classList.remove('hover'); }
                                    hoveredNode = intersectedGroup; playHover(); customCursor.classList.add('hover');
                                    gsap.to(hoveredNode.children[0].material.uniforms.uShine, { value: 1.0, duration: 0.5 }); const newText = hoveredNode.getObjectByName("text"); if (newText) gsap.to(newText.material, { opacity: 1.0, duration: 0.5 });
                                }
                            } else {
                                if (hoveredNode) { customCursor.classList.remove('hover'); gsap.to(hoveredNode.children[0].material.uniforms.uShine, { value: 0, duration: 0.5 }); const oldText = hoveredNode.getObjectByName("text"); if (oldText) gsap.to(oldText.material, { opacity: 0, duration: 0.5 }); hoveredNode = null; }
                               const mouseDistance = Math.sqrt(mouse.x * mouse.x + mouse.y * mouse.y);
                               coreProximityValue = 1.0 - smoothstep(0.0, 0.4, mouseDistance); 
                            }
                        } else { if (hoveredNode) { customCursor.classList.remove('hover'); hoveredNode = null; } }
                    } // end !isExploreMode block

                    if (sunCore && sunCore.material.uniforms.uCoreProximity) { 
                        gsap.to(sunCore.material.uniforms.uCoreProximity, { value: coreProximityValue, duration: 0.3 }); 
                    }

                    // Only run parallax if NOT in explore mode and no panel is active
                    if (!isExploreMode && document.querySelectorAll('.content-panel.active').length === 0 && !gsap.isTweening(mainCamera.position)) {
                         mainCamera.position.x = THREE.MathUtils.lerp(mainCamera.position.x, homePosition.x + mouse.x * 1.5, 0.05); 
                         mainCamera.position.y = THREE.MathUtils.lerp(mainCamera.position.y, homePosition.y + mouse.y * 1.5, 0.05);
                         controls.target.set(0,0,0);
                    }

                    mainCamera.lookAt(controls.target); 
                    controls.update(); // Update controls *every* frame (needed for damping)
                    mainRenderer.render(mainScene, mainCamera);
                };
                animate();
                
                window.addEventListener('resize', () => {
                    const aspect = window.innerWidth / window.innerHeight;
                    mainCamera.aspect = aspect;
                    mainCamera.fov = aspect < 1 ? 60 : 50; 
                    mainCamera.updateProjectionMatrix();
                    mainRenderer.setSize(window.innerWidth, window.innerHeight);
                    mainRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                });
            } // End initMainScene

            // --- CAMERA NAVIGATION & PANEL LOGIC --- 
            // UPDATED flyToSection to "fly-to-planet"
             function flyToSection(targetId) {
                playClick();
                gsap.to("#home-content", { opacity: 0, duration: 0.5, pointerEvents: 'none' });

                if (!targetId) { // Fly home
                    gsap.to(mainCamera.position, { x: homePosition.x, y: homePosition.y, z: homePosition.z, duration: 1.5, ease: "power3.inOut" });
                    gsap.to(controls.target, { x: 0, y: 0, z: 0, duration: 1.5, ease: "power3.inOut", onComplete: () => {
                            gsap.to("#home-content", { opacity: 1, duration: 0.5, pointerEvents: 'none' });
                            controls.enabled = false; 
                        }
                    });
                    return;
                }
                
                const targetNode = navNodes.find(n => n.name === targetId);
                if (!targetNode) {
                    console.error("Target node not found:", targetId);
                    flyToSection(null); // Go home if node not found
                    return;
                }

                const targetPanel = document.getElementById(targetId);
                if (!targetPanel) return; 

                // Calculate target position relative to the planet
                const offset = new THREE.Vector3(0, 1.5, 4); // View from +Z axis relative to planet
                const targetPos = targetNode.position.clone().add(offset);
                const targetLookAt = targetNode.position.clone();

                controls.enabled = false; // Disable controls during flight
                gsap.to(mainCamera.position, { 
                    x: targetPos.x, y: targetPos.y, z: targetPos.z, 
                    duration: 1.5, ease: "power3.inOut", 
                    onComplete: () => {
                        targetPanel.classList.add('active');
                        animateHeadings(targetPanel);
                    }
                });
                gsap.to(controls.target, { 
                    x: targetLookAt.x, y: targetLookAt.y, z: targetLookAt.z, 
                    duration: 1.5, ease: "power3.inOut" 
                });
            }

            function closePanel() {
                playClick();
                const activePanel = document.querySelector('.content-panel.active');
                if (activePanel) {
                    const targetNode = navNodes.find(n => n.name === activePanel.id);
                    if (targetNode) {
                        gsap.to(targetNode.children[0].material.uniforms.uShine, { value: 0, duration: 0.5 });
                        const text = targetNode.getObjectByName("text");
                        if (text) gsap.to(text.material, { opacity: 0, duration: 0.5 });
                    }
                    activePanel.classList.remove('active');
                }
                // Only fly home if NOT in explore mode
                if (!isExploreMode) {
                    flyToSection(null); 
                }
            }

            document.querySelectorAll('.nav-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    // If in explore mode, exit it
                    if (isExploreMode) { toggleExploreMode(); }
                    
                    const targetId = this.getAttribute('data-target');
                    const activePanel = document.querySelector('.content-panel.active');
                    if (activePanel) { closePanel(); }
                    if (targetId === "home") { flyToSection(null); } 
                    else { flyToSection(targetId); }
                    const mobileMenu = document.getElementById('mobile-menu'); 
                    if (mobileMenu && this.classList.contains('mobile-nav-link')) { mobileMenu.classList.add('hidden'); }
                });
            });

            window.addEventListener('click', () => {
                // Only trigger fly-to on click if NOT in explore mode
                if (!isExploreMode && hoveredNode && !document.querySelector('.content-panel.active')) {
                    flyToSection(hoveredNode.name);
                }
            });
            
            document.querySelectorAll('.content-close-btn').forEach(btn => {
                btn.addEventListener('click', closePanel);
            });

            // --- EXPLORE MODE LOGIC ---
            function toggleExploreMode() {
                playClick();
                isExploreMode = !isExploreMode;
                controls.enabled = isExploreMode;
                
                const exploreBtn = document.getElementById('explore-btn');
                const mobileExploreBtn = document.getElementById('mobile-explore-btn');
                
                if (isExploreMode) {
                    if (exploreBtn) { exploreBtn.textContent = "Exit Explore"; exploreBtn.classList.add('active'); }
                    if (mobileExploreBtn) { mobileExploreBtn.textContent = "Exit Explore"; mobileExploreBtn.classList.add('active'); }
                    closePanel(); // Close any open panel
                    gsap.to("#home-content", { opacity: 0, duration: 0.5, pointerEvents: 'none' });
                    // Set target to center when starting explore
                    controls.target.set(0,0,0);
                } else {
                    if (exploreBtn) { exploreBtn.textContent = "Explore Mode"; exploreBtn.classList.remove('active'); }
                    if (mobileExploreBtn) { mobileExploreBtn.textContent = "Explore Mode"; mobileExploreBtn.classList.remove('active'); }
                    flyToSection(null); // Fly home
                }
                
                // Close mobile menu if it's open
                const mobileMenu = document.getElementById('mobile-menu');
                if (mobileMenu) mobileMenu.classList.add('hidden');
            }
            document.getElementById('explore-btn')?.addEventListener('click', toggleExploreMode);
            document.getElementById('mobile-explore-btn')?.addEventListener('click', toggleExploreMode);


            // --- GLOBAL MOUSE & SOUND ---
            window.addEventListener('mousemove', e => {
                mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
                if(customCursor) { 
                    customCursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                    customCursor.style.opacity = '1'; 
                }
            });
             window.addEventListener('mouseout', () => { if(customCursor) customCursor.style.opacity = '0'; }); 
             window.addEventListener('mousedown', () => {
                 customCursor?.classList.add('clicked');
                if (!soundsReady) {
                    Tone.start().then(() => { 
                        soundsReady = true; 
                        playClick(); 
                        if (noise.state !== "started") noise.start(0); // Start ambient noise
                    }).catch(e => console.error("AudioCtx start err:", e));
                } else { playClick(); }
                 setTimeout(() => customCursor?.classList.remove('clicked'), 100); 
            });
             
            // Hover listeners for 2D elements 
            const interactiveElements = document.querySelectorAll('a, button, input, textarea, select, label, .project-card, .tech-card, .github-card, .contact-icon-link, .filter-btn, .modal-close-btn, #mute-btn, #explore-btn, #mobile-explore-btn'); // Added explore btns
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => customCursor?.classList.add('hover'));
                el.addEventListener('mouseleave', () => customCursor?.classList.remove('hover'));
            });
            
            // --- MUTE BUTTON ---
            const muteBtn = document.getElementById('mute-btn');
            const soundOnIcon = document.getElementById('sound-on-icon');
            const soundOffIcon = document.getElementById('sound-off-icon');
            if (muteBtn && soundOnIcon && soundOffIcon) { 
                muteBtn.addEventListener('click', () => {
                    isMuted = !isMuted;
                    soundOnIcon.classList.toggle('hidden', isMuted);
                    soundOffIcon.classList.toggle('hidden', !isMuted);
                    // Mute/unmute Tone.js master output
                    Tone.Destination.mute = isMuted;

                    if (!isMuted && !soundsReady) {
                        Tone.start().then(() => { 
                            soundsReady = true; 
                            if (noise.state !== "started") noise.start(0);
                        }).catch(e => console.error("AudioCtx start err:", e));
                    }
                });
            }
            
            // --- MOBILE MENU ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu'); 
            if (mobileMenuButton && mobileMenu) { 
               mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            } else { console.error("Mobile menu button or menu itself not found!"); }
            
            // --- DATA --- 
            const experienceData = [ 
                 { title: "AI & ML Developer", company: "Samsung PRISM", points: ["Developed AI reverse prompt generator analyzing images to create text prompts.", "Engineered AI proctoring system with real-time face detection.", "Utilized GANs for medical image segmentation and enhancement.", "Trained models using Python, TensorFlow, and OpenCV."] },
                { title: "Full-Stack Developer", company: "Personal Projects", points: ["Architected 'API-Forge,' a no-code backend solution.", "Designed robust relational database systems for various applications.", "Developed a full-featured social media website.", "Created scalable cloud networks using CISCO simulation tools."] }
            ];
             const projectsData = [ // Using the hardcoded data
                { name: "Medical Image Segmentation", category: "ai", desc: "Utilized GANs for segmenting bone fractures in medical imagery.", tags: [{n: "GANs", c: "gold"}, {n: "AI/ML", c: "gold"}, {n: "Python", c: "gold"}], link: "https://github.com/Monish21072004/Medical-Image-Segmentation-for-Bone-Fracture-using-GAN", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/medical_image_segmentation_usi.png" },
                { name: "API-Forge: No-Code Backend", category: "web", desc: "A no-code backend solution simplifying API creation.", tags: [{n: "Backend", c: "gold"}, {n: "Node.js", c: "gold"}, {n: "API", c: "gold"}], link: "https://github.com/Monish21072004/API-Forge", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/api_forge__no_code_backend_a_n.png" },
                { name: "Dragon Proctor: AI Proctoring", category: "ai", desc: "AI proctoring solution with real-time facial detection.", tags: [{n: "CompVision", c: "gold"}, {n: "AI", c: "gold"}, {n: "OpenCV", c: "gold"}], link: "https://github.com/Monish21072004/dragon_proctor", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/dragon_proctor__ai_proctoring_.png" },
                { name: "AI Reverse Prompt Generator", category: "ai", desc: "An AI tool (Samsung PRISM) that analyzes images to generate text prompts.", tags: [{n: "AI/ML", c: "gold"}, {n: "Python", c: "gold"}, {n: "NLP", c: "gold"}], link: "https://github.com/Monish21072004/23GAI32_Reverse_prompt_generator-main", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/ai_reverse_prompt_generator_an.png" },
                { name: "Smart Attendance System", category: "ai", desc: "Automated attendance system using facial recognition.", tags: [{n: "FaceRec", c: "gold"}, {n: "OpenCV", c: "gold"}, {n: "Python", c: "gold"}], link: "https://github.com/Monish21072004/Smart-Attendance-System", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/smart_attendance_system_automa.png" },
                { name: "Land Slide Detection", category: "ai", desc: "An AI model to detect and predict land slides from satellite imagery.", tags: [{n: "AI/ML", c: "gold"}, {n: "DeepLearning", c: "gold"}, {n: "Python", c: "gold"}], link: "https://github.com/Monish21072004/Land-Slide-Detection-.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/land_slide_detection_an_ai_mod.png" },
                { name: "SafeNet Security Suite", category: "software", desc: "A comprehensive security application for a secure online experience.", tags: [{n: "Security", c: "gold"}, {n: "Python", c: "gold"}, {n: "Networking", c: "gold"}], link: "https://github.com/Monish21072004/SafeNet.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/tray_icon.png" },
                { name: "Live Higher Studies News", category: "web", desc: "A web app that aggregates live news for higher education.", tags: [{n: "WebApp", c: "gold"}, {n: "NewsAPI", c: "gold"}, {n: "Frontend", c: "gold"}], link: "https://github.com/Monish21072004/Live-Higher-Studies-News-.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/Higher%20Studies.png", demo: "https://monish21072004.github.io/Live-Higher-Studies-News-" },
                { name: "DRAGON CHASE Game", category: "game", desc: "An interactive 2D game developed with Pygame.", tags: [{n: "GameDev", c: "gold"}, {n: "Python", c: "gold"}, {n: "Pygame", c: "gold"}], link: "https://github.com/Monish21072004/DRAGON-CHASE.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/Dragon_Chase.png", demo: "https://monish21072004.github.io/DRAGON-CHASE/" },
                { name: "Face Emotion Recognition", category: "ai", desc: "An AI application that detects and classifies human emotions in real-time.", tags: [{n: "AI/ML", c: "gold"}, {n: "ComputerVision", c: "gold"}, {n: "OpenCV", c: "gold"}], link: "https://github.com/Monish21072004/Face-Emotion-Recognition.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/face_emotion_recognition_an_ai.png" },
                { name: "Store Management System", category: "software", desc: "A robust database-driven application for managing store inventory.", tags: [{n: "Database", c: "gold"}, {n: "SQL", c: "gold"}, {n: "Backend", c: "gold"}], link: "https://github.com/Monish21072004/Store_Management.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/store_management_system_a_robu.png" },
                { name: "Bingo Game", category: "game", desc: "A classic Bingo game with an interactive UI. Fun for all ages!", tags: [{n: "GameDev", c: "gold"}, {n: "JavaScript", c: "gold"}, {n: "CSS", c: "gold"}], link: "https://github.com/Monish21072004/Bingo-game.git", image: "https://raw.githubusercontent.com/Monish21072004/Portfolio/main/assets/BingoGame.png", demo: "https://monish21072004.github.io/Bingo-game" }
            ];

            const technologiesData = [ 
                 { name: "Python", desc: "My primary language for AI/ML, backend services, and scripting.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg" },
                { name: "JavaScript", desc: "Used for frontend interactivity and building dynamic web applications.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg" },
                { name: "TensorFlow", desc: "Experience in building and training deep learning models for various tasks.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/tensorflow/tensorflow-original.svg" },
                { name: "PyTorch", desc: "Proficient in creating neural networks for research and production environments.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/pytorch/pytorch-original.svg" },
                { name: "OpenCV", desc: "Extensive use in computer vision projects for image and video analysis.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/opencv/opencv-original.svg" },
                { name: "SQL", desc: "Strong skills in database design, querying, and management with MySQL.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/mysql/mysql-original.svg" },
                { name: "Oracle", desc: "Experience with Oracle databases for enterprise-level applications.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/oracle/oracle-original.svg" },
                { name: "Node.js", desc: "Building scalable backend services and APIs.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/nodejs/nodejs-original.svg" },
                { name: "AWS", desc: "Familiar with deploying and managing applications on AWS.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/amazonwebservices/amazonwebservices-original-wordmark.svg" },
                { name: "Docker", desc: "Containerizing applications for consistent development and deployment.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/docker/docker-original.svg" },
                { name: "Git", desc: "Proficient in version control for collaborative and personal projects.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/git/git-original.svg" },
                { name: "HTML5 & CSS3", desc: "Crafting modern, responsive, and visually appealing user interfaces.", icon: "https://raw.githubusercontent.com/devicons/devicon/master/icons/html5/html5-original.svg" },
            ];

            // --- DOM POPULATION FUNCTIONS ---
            
            // Experience Timeline
            const experienceContainer = document.getElementById('experience-container');
            if (experienceContainer) { 
                experienceData.forEach((exp, index) => { 
                    const isLeft = index % 2 === 0;
                    const container = document.createElement('div');
                    container.className = `timeline-container ${isLeft ? 'left' : 'right'} gsap-reveal`; 
                    container.innerHTML = `<div class="timeline-content"><h3 class="text-white text-xl md:text-2xl font-bold">${exp.title}</h3><p class="text-secondary-text text-base md:text-lg font-semibold m-0">${exp.company}</p><ul class="mt-3 md:mt-4 list-disc ml-5 space-y-2">${exp.points.map(p => `<li class="text-xs md:text-sm">${p}</li>`).join('')}</ul></div>`; 
                    experienceContainer.appendChild(container);
                });
            }

             // Project Cards
            const projectsContainer = document.getElementById('projects-container');
            const renderProjects = (filter = 'all') => { 
                if (!projectsContainer) return; 
                projectsContainer.innerHTML = '';
                const filteredProjects = filter === 'all' ? projectsData : projectsData.filter(p => p.category === filter);
                
                const sortedProjects = [...filteredProjects].reverse(); 

                sortedProjects.forEach((p, index) => { 
                    const originalIndex = projectsData.indexOf(p); 
                    const card = document.createElement('div');
                    card.className = 'project-card p-4 md:p-5 rounded-2xl w-full'; 
                    card.dataset.index = originalIndex; 
                    card.innerHTML = `<div class="relative w-full h-[180px] md:h-[230px]"><img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover rounded-xl md:rounded-2xl" onerror="this.onerror=null;this.src='https://placehold.co/600x400/1A1A1A/D4AF37?text=Image+Not+Found';"/></div><div class="mt-4 md:mt-5"><h3 class="text-white font-bold text-xl md:text-2xl">${p.name}</h3><p class="mt-1 md:mt-2 text-xs md:text-sm text-gray-400 line-clamp-2">${p.desc}</p></div><div class="mt-3 md:mt-4 flex flex-wrap gap-2">${(p.tags || []).map(t => `<p class="tag text-xs md:text-sm gold-text-gradient">#${t.n}</p>`).join('')}</div>`; 
                    projectsContainer.appendChild(card);
                });
                gsap.fromTo(projectsContainer.children, { y: 50, autoAlpha: 0 }, { y: 0, autoAlpha: 1, duration: 0.8, ease: "power3.out", stagger: 0.1 });
            }

            // Tech Icons
            const techContainer = document.getElementById('tech-icons-container');
            if (techContainer) { 
                technologiesData.forEach((tech, index) => { 
                    const wrapper = document.createElement('div');
                    wrapper.className = 'tech-card p-3 md:p-4 rounded-lg flex flex-col items-center justify-center gap-1 md:gap-2 gsap-reveal'; 
                    wrapper.dataset.index = index;
                    wrapper.innerHTML = `<img src="${tech.icon}" alt="${tech.name}" class="w-12 h-12 md:w-16 md:h-16 object-contain" onerror="this.onerror=null;this.src='https://placehold.co/100x100/1A1A1A/D4AF37?text=${tech.name}';" /><p class="tech-name text-white font-medium text-center text-xs md:text-sm">${tech.name}</p>`; 
                    techContainer.appendChild(wrapper);
                });
            }

            // Function to update category filters based on current projectsData
             const filterButtonsContainer = document.getElementById('project-filters');
            function updateCategoryFilters() {
                if (!filterButtonsContainer) return; 

                const categories = ['all', ...new Set(projectsData.map(p => p.category.toLowerCase()))];
                
                // Update Filter Buttons
                const currentActiveFilter = filterButtonsContainer.querySelector('.active')?.dataset.filter || 'all'; 
                filterButtonsContainer.innerHTML = ''; 
                categories.forEach((cat) => {
                    const button = document.createElement('button');
                    button.className = 'filter-btn';
                    button.dataset.filter = cat;
                    button.textContent = cat === 'ai' ? 'AI/ML' : cat.charAt(0).toUpperCase() + cat.slice(1);
                    if (cat === currentActiveFilter) { button.classList.add('active'); } 
                    
                    button.addEventListener('click', () => {
                        playClick();
                        filterButtonsContainer.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        renderProjects(button.dataset.filter);
                    });
                    button.addEventListener('mouseenter', playHover);
                    filterButtonsContainer.appendChild(button);
                });
            }


             // Project Modal 
            const projectModal = document.getElementById('project-modal');
            const projectModalCloseBtn = projectModal?.querySelector('.modal-close-btn'); 
            if (projectsContainer) { 
                projectsContainer.addEventListener('click', (e) => { 
                    const card = e.target.closest('.project-card');
                    const currentProjectIndex = parseInt(card?.dataset.index || '-1', 10); 
                    if (card && currentProjectIndex >= 0 && currentProjectIndex < projectsData.length) { 
                        playClick();
                        const project = projectsData[currentProjectIndex]; 
                        const imgEl = document.getElementById('modal-project-image');
                        const titleEl = document.getElementById('modal-project-title');
                        const descEl = document.getElementById('modal-project-desc');
                        const linkEl = document.getElementById('modal-project-link');
                        const demoLinkEl = document.getElementById('modal-project-demo-link'); 
                        const tagsContainer = document.getElementById('modal-project-tags');

                        if (imgEl) imgEl.src = project.image || ''; 
                        if (titleEl) titleEl.innerText = project.name || 'Project Title';
                        if (descEl) descEl.innerText = project.desc || 'No description available.'; 
                        if (linkEl) linkEl.href = project.link || '#'; 
                        
                        if (demoLinkEl) { 
                            if (project.demo) {
                                demoLinkEl.href = project.demo; 
                                demoLinkEl.style.display = 'inline-block';
                            } else {
                                demoLinkEl.style.display = 'none';
                            }
                        } 

                        if (tagsContainer) {
                            tagsContainer.innerHTML = project.tags ? project.tags.map(t => `<p class="tag text-xs md:text-sm gold-text-gradient bg-black bg-opacity-20 px-2 py-1 rounded-md">#${t.n || 'tag'}</p>`).join('') : ''; 
                        }
                        if (projectModal) projectModal.classList.add('active'); 
                    }
                });
            }

             // Tech Modal 
            const techModal = document.getElementById('tech-modal');
            const techModalCloseBtn = techModal?.querySelector('.modal-close-btn'); 
             if (techContainer) { 
                techContainer.addEventListener('click', (e) => { 
                    const card = e.target.closest('.tech-card');
                     const techIndex = parseInt(card?.dataset.index || '-1', 10);
                    if (card && techIndex >= 0 && techIndex < technologiesData.length) { 
                        playClick();
                        const tech = technologiesData[techIndex];
                        const imgEl = document.getElementById('modal-tech-image');
                        const titleEl = document.getElementById('modal-tech-title');
                        const descEl = document.getElementById('modal-tech-desc');
                        
                        if(imgEl) imgEl.src = tech.icon || '';
                        if(titleEl) titleEl.innerText = tech.name || 'Technology';
                        if(descEl) descEl.innerText = tech.desc || 'No description.';

                        if(techModal) techModal.classList.add('active'); 
                    }
                });
             }

            // Modal Close 
            function closeModal(modal) { if(modal) { playClick(); modal.classList.remove('active'); } } 
            projectModalCloseBtn?.addEventListener('click', () => closeModal(projectModal));
            projectModal?.addEventListener('click', (e) => { if (e.target === projectModal) closeModal(projectModal); });
            techModalCloseBtn?.addEventListener('click', () => closeModal(techModal));
            techModal?.addEventListener('click', (e) => { if (e.target === techModal) closeModal(techModal); });
            
            // GSAP Animations 
            function animateHeadings(panel) { 
                 if (!panel) return; 
                panel.querySelectorAll('.section-head').forEach(heading => {
                    if (!heading.querySelector('.char')) {
                        const text = heading.textContent; heading.innerHTML = '';
                        text.split('').forEach(char => { const span = document.createElement('span'); span.className = 'char inline-block'; span.textContent = char === ' ' ? '\u00A0' : char; heading.appendChild(span); });
                    }
                    gsap.fromTo(heading.querySelectorAll('.char'), { y: '115%' }, { y: 0, stagger: 0.05, delay: 0.5, duration: 0.5, ease: 'power3.out', overwrite: true });
                });
                gsap.utils.toArray(panel.querySelectorAll('.gsap-reveal')).forEach(el => {
                    gsap.fromTo(el, {y: 50, autoAlpha: 0}, { y: 0, autoAlpha: 1, duration: 1.2, ease: "power3.out", stagger: 0.1, delay: 0.2, overwrite: true });
                });
            }

            // Contact Icons Population
            const contactIconsContainer = document.getElementById('contact-icons');
             if(contactIconsContainer){ 
                const contactInfo = [
                    { href: "mailto:monishv217@gmail.com", label: "Email Monish", svgPath: "M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" },
                    { href: "tel:+919345993268", label: "Call Monish", svgPath: "M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.211-.992-.55-1.34L20.07 15.636a2.25 2.25 0 00-3.182 0l-1.97 1.97-1.56-1.56a11.25 11.25 0 01-6.176-6.176l1.56-1.56 1.97-1.97a2.25 2.25 0 000-3.182L6.841 3.9a2.25 2.25 0 00-1.34-.55H4.125A2.25 2.25 0 001.875 5.625v1.125z" },
                    { href: "https://github.com/Monish21072004", label: "Monish's GitHub Profile", svgPath: "M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.026 2.747-1.026.546 1.379.202 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12.017C22 6.484 17.523 2 12 2z", isGithub: true }
                ];

                contactInfo.forEach(info => {
                    const link = document.createElement('a');
                    link.href = info.href;
                    link.className = 'contact-icon-link rounded-full p-4'; 
                    link.setAttribute('aria-label', info.label);
                    if (info.isGithub) {
                         link.target = '_blank'; link.rel = 'noopener noreferrer';
                         link.innerHTML = `<svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="${info.svgPath}" clip-rule="evenodd" /></svg>`;
                    } else {
                         link.innerHTML = `<svg class="w-8 h-8 text-gray-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="${info.svgPath}" /></svg>`;
                    }
                    link.addEventListener('mousemove', e => { const rect = link.getBoundingClientRect(); const x = e.clientX - (rect.left + rect.width / 2); const y = e.clientY - (rect.top + rect.height / 2); gsap.to(link, { x: x * 0.3, y: y * 0.3, duration: 0.7, ease: "power4.out" }); });
                    link.addEventListener('mouseleave', () => { gsap.to(link, { x: 0, y: 0, duration: 0.7, ease: "elastic.out(1, 0.3)" }); });
                    link.addEventListener('mouseenter', playHover);
                    contactIconsContainer.appendChild(link);
                });
             } else { console.error("#contact-icons container not found!"); }
            
            // Nav Links Hover Sound
            document.querySelectorAll('.nav-link').forEach(link => { link.addEventListener('mouseenter', playHover); });

            // GitHub Stats Fetch
            async function getGitHubStats() { 
                 try {
                    const userResponse = await fetch('https://api.github.com/users/Monish21072004');
                    if (!userResponse.ok) throw new Error(`HTTP error! status: ${userResponse.status}`);
                    const userData = await userResponse.json();
                     const repoCountEl = document.getElementById('repo-count'); if (repoCountEl) repoCountEl.innerText = userData.public_repos || 0;
                    const reposResponse = await fetch('https://api.github.com/users/Monish21072004/repos?per_page=100');
                     if (!reposResponse.ok) throw new Error(`HTTP error! status: ${reposResponse.status}`);
                    const reposData = await reposResponse.json();
                    const totalStars = reposData.reduce((acc, repo) => acc + (repo.stargazers_count || 0), 0);
                     const starCountEl = document.getElementById('star-count'); if (starCountEl) starCountEl.innerText = totalStars;
                } catch (error) {
                    console.error("Error fetching GitHub stats:", error);
                     const repoCountEl = document.getElementById('repo-count'); const starCountEl = document.getElementById('star-count');
                     if (repoCountEl) repoCountEl.innerText = 'N/A'; if (starCountEl) starCountEl.innerText = 'N/A';
                }
            }

            // --- Init ---
            initMainScene();
            updateCategoryFilters(); // Initial population of filters
            renderProjects(); // Render projects initially 
            getGitHubStats(); // Fetch stats
        });
    </script>
</body>
</html>

